# Test info

- Name: File Upload Validation Edge Cases >> should reject files larger than 10MB size limit
- Location: /home/tim/WebsitePrototype/playwright-testing/tests/file-upload-validation-edge-cases.spec.js:11:3

# Error details

```
Error: expect(received).toBeTruthy()

Received: false
    at /home/tim/WebsitePrototype/playwright-testing/tests/file-upload-validation-edge-cases.spec.js:86:24
```

# Page snapshot

```yaml
- navigation:
  - link "ðŸ  Dashboard":
    - /url: dashboard.html
  - link "ðŸ‘¥ Twin Management":
    - /url: twin-management.html
  - link "ðŸ” Explore":
    - /url: explore.html
  - link "ðŸŽ¤ Interview":
    - /url: interview.html
  - link "ðŸŽ¨ Curator":
    - /url: curator.html
  - link "ðŸ“ Transcripts":
    - /url: interview-transcripts.html
  - link "ðŸ’¬ Talk to Twin":
    - /url: talk-to-twin.html
  - link "ðŸ“ My Files":
    - /url: my-files.html
  - link "âš™ï¸ Settings":
    - /url: settings.html
  - link "ðŸšª Logout":
    - /url: auth.html
- main:
  - heading "My Files" [level=1]
  - paragraph: Manage your documents and media files
  - textbox "Search files..."
  - text: ðŸ”
  - button "âŠž"
  - button "â˜°"
  - text: "ðŸ“ Drag files here or click to browse Supported: Images, Documents, Spreadsheets, Ebooks (Max 10MB per file)"
  - button "Choose Files"
  - checkbox "Select All"
  - text: "Select All Type:"
  - combobox "Type:":
    - option "All Files" [selected]
    - option "Images"
    - option "Documents"
    - option "Spreadsheets"
    - option "Ebooks"
  - text: "Sort by:"
  - combobox "Sort by:":
    - option "Newest First" [selected]
    - option "Oldest First"
    - option "Name (A-Z)"
    - option "Name (Z-A)"
    - option "Largest First"
    - option "Smallest First"
  - paragraph: Loading your files...
  - heading "Storage Overview" [level=2]
  - heading "Storage Breakdown" [level=3]
  - heading "Quick Stats" [level=3]
  - text: 0 GB Total Used 0 Total Files 0 MB Largest File 0 MB Average Size
  - heading "Storage Usage" [level=3]
  - text: 0 MB of 1 GB used 0%
  - heading "Quick Actions" [level=3]
  - button "ðŸ”§ Optimize Storage"
  - button "ðŸ“Š Export Report"
- text: Test script executed
```

# Test source

```ts
   1 | const { test, expect } = require('@playwright/test');
   2 | const path = require('path');
   3 |
   4 | test.describe('File Upload Validation Edge Cases', () => {
   5 |   
   6 |   test.beforeEach(async ({ page }) => {
   7 |     await page.goto('http://localhost:8357/pages/my-files.html');
   8 |     await page.waitForLoadState('networkidle');
   9 |   });
   10 |
   11 |   test('should reject files larger than 10MB size limit', async ({ page }) => {
   12 |     // Find file input and drop zone
   13 |     const fileInput = page.locator('#fileInput');
   14 |     const dropZone = page.locator('#dropZone, .file-drop-zone');
   15 |     
   16 |     if (!await fileInput.isVisible() && !await dropZone.isVisible()) {
   17 |       test.skip('File upload interface not found on this page');
   18 |     }
   19 |     
   20 |     // Create a large file blob that exceeds 10MB (simulate 15MB file)
   21 |     const largeMockFile = await page.evaluate(() => {
   22 |       const size = 15 * 1024 * 1024; // 15MB
   23 |       const buffer = new ArrayBuffer(size);
   24 |       const file = new File([buffer], 'large-file.jpg', { type: 'image/jpeg' });
   25 |       return {
   26 |         name: file.name,
   27 |         size: file.size,
   28 |         type: file.type
   29 |       };
   30 |     });
   31 |     
   32 |     // Mock file selection with oversized file
   33 |     await page.evaluate((mockFile) => {
   34 |       const fileInput = document.querySelector('#fileInput');
   35 |       console.log('File input found:', !!fileInput);
   36 |       
   37 |       if (fileInput) {
   38 |         const dataTransfer = new DataTransfer();
   39 |         const file = new File([new ArrayBuffer(mockFile.size)], mockFile.name, { type: mockFile.type });
   40 |         console.log('Created file:', file.name, file.size, file.type);
   41 |         
   42 |         dataTransfer.items.add(file);
   43 |         fileInput.files = dataTransfer.files;
   44 |         console.log('Files set on input:', fileInput.files.length);
   45 |         
   46 |         // Trigger change event
   47 |         const event = new Event('change', { bubbles: true });
   48 |         console.log('Dispatching change event');
   49 |         fileInput.dispatchEvent(event);
   50 |         console.log('Event dispatched');
   51 |         
   52 |         // Add a test div to verify script execution
   53 |         const testDiv = document.createElement('div');
   54 |         testDiv.className = 'test-debug';
   55 |         testDiv.textContent = 'Test script executed';
   56 |         document.body.appendChild(testDiv);
   57 |       }
   58 |     }, largeMockFile);
   59 |     
   60 |     // Wait a moment for processing
   61 |     await page.waitForTimeout(1000);
   62 |     
   63 |     // Check if test script executed
   64 |     const testDebugVisible = await page.locator('.test-debug').isVisible().catch(() => false);
   65 |     console.log('Test debug div visible:', testDebugVisible);
   66 |     
   67 |     // Should show error message about file size
   68 |     const errorSelectors = [
   69 |       'text=/file.*size.*10.*mb/i',
   70 |       'text=/file.*too.*large/i',
   71 |       'text=/size.*limit/i',
   72 |       '.error',
   73 |       '.upload-error',
   74 |       '.validation-error',
   75 |       '[class*="error"]'
   76 |     ];
   77 |     
   78 |     let errorFound = false;
   79 |     for (const selector of errorSelectors) {
   80 |       if (await page.locator(selector).first().isVisible().catch(() => false)) {
   81 |         errorFound = true;
   82 |         break;
   83 |       }
   84 |     }
   85 |     
>  86 |     expect(errorFound).toBeTruthy();
      |                        ^ Error: expect(received).toBeTruthy()
   87 |   });
   88 |
   89 |   test('should reject unsupported file types', async ({ page }) => {
   90 |     const fileInput = page.locator('#fileInput');
   91 |     const dropZone = page.locator('#dropZone, .file-drop-zone');
   92 |     
   93 |     if (!await fileInput.isVisible() && !await dropZone.isVisible()) {
   94 |       test.skip('File upload interface not found on this page');
   95 |     }
   96 |     
   97 |     // Test various unsupported file types
   98 |     const unsupportedFiles = [
   99 |       { name: 'video.mp4', type: 'video/mp4' },
  100 |       { name: 'audio.mp3', type: 'audio/mp3' },
  101 |       { name: 'executable.exe', type: 'application/x-msdownload' },
  102 |       { name: 'script.js', type: 'application/javascript' },
  103 |       { name: 'archive.zip', type: 'application/zip' },
  104 |       { name: 'unknown.xyz', type: 'application/octet-stream' },
  105 |       { name: 'image.bmp', type: 'image/bmp' }, // BMP not in supported list
  106 |       { name: 'presentation.ppt', type: 'application/vnd.ms-powerpoint' }
  107 |     ];
  108 |     
  109 |     for (const unsupportedFile of unsupportedFiles) {
  110 |       // Mock file selection with unsupported file type
  111 |       await page.evaluate((mockFile) => {
  112 |         const fileInput = document.querySelector('#fileInput');
  113 |         if (fileInput) {
  114 |           const dataTransfer = new DataTransfer();
  115 |           const file = new File(['content'], mockFile.name, { type: mockFile.type });
  116 |           dataTransfer.items.add(file);
  117 |           fileInput.files = dataTransfer.files;
  118 |           
  119 |           // Trigger change event
  120 |           const event = new Event('change', { bubbles: true });
  121 |           fileInput.dispatchEvent(event);
  122 |         }
  123 |       }, unsupportedFile);
  124 |       
  125 |       await page.waitForTimeout(300);
  126 |       
  127 |       // Should show error message about unsupported file type
  128 |       const errorSelectors = [
  129 |         'text=/file.*type.*not.*supported/i',
  130 |         'text=/unsupported.*file/i',
  131 |         'text=/not.*supported/i',
  132 |         '.error',
  133 |         '.upload-error'
  134 |       ];
  135 |       
  136 |       let errorFound = false;
  137 |       for (const selector of errorSelectors) {
  138 |         if (await page.locator(selector).first().isVisible().catch(() => false)) {
  139 |           errorFound = true;
  140 |           break;
  141 |         }
  142 |       }
  143 |       
  144 |       expect(errorFound).toBeTruthy();
  145 |     }
  146 |   });
  147 |
  148 |   test('should accept all supported file types', async ({ page }) => {
  149 |     const fileInput = page.locator('#fileInput');
  150 |     
  151 |     if (!await fileInput.isVisible()) {
  152 |       test.skip('File input not found on this page');
  153 |     }
  154 |     
  155 |     // Test supported file types from the specification
  156 |     const supportedFiles = [
  157 |       // Images
  158 |       { name: 'image.jpg', type: 'image/jpeg' },
  159 |       { name: 'image.jpeg', type: 'image/jpeg' },
  160 |       { name: 'image.png', type: 'image/png' },
  161 |       { name: 'image.gif', type: 'image/gif' },
  162 |       { name: 'image.webp', type: 'image/webp' },
  163 |       
  164 |       // Documents
  165 |       { name: 'document.pdf', type: 'application/pdf' },
  166 |       { name: 'document.doc', type: 'application/msword' },
  167 |       { name: 'document.docx', type: 'application/vnd.openxmlformats-officedocument.wordprocessingml.document' },
  168 |       { name: 'document.txt', type: 'text/plain' },
  169 |       { name: 'document.rtf', type: 'application/rtf' },
  170 |       
  171 |       // Spreadsheets
  172 |       { name: 'spreadsheet.xls', type: 'application/vnd.ms-excel' },
  173 |       { name: 'spreadsheet.xlsx', type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' },
  174 |       
  175 |       // Ebooks
  176 |       { name: 'book.epub', type: 'application/epub+zip' }
  177 |     ];
  178 |     
  179 |     for (const supportedFile of supportedFiles) {
  180 |       // Mock file selection with supported file type
  181 |       await page.evaluate((mockFile) => {
  182 |         const fileInput = document.querySelector('#fileInput');
  183 |         if (fileInput) {
  184 |           const dataTransfer = new DataTransfer();
  185 |           const file = new File(['test content'], mockFile.name, { type: mockFile.type });
  186 |           dataTransfer.items.add(file);
```